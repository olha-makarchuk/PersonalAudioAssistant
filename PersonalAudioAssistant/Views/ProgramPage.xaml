<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PersonalAudioAssistant.Views.ProgramPage"
             xmlns:local="clr-namespace:PersonalAudioAssistant.ViewModel"
             Title="Audio Assistant">
    <ContentPage.Resources>
        <ResourceDictionary>
            <local:ListenButtonTextConverter x:Key="ListenButtonTextConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout
            Spacing="25"
            Padding="30,0"
            VerticalOptions="Center">

            <!-- Recognition result label -->
            <Label
                Text="{Binding RecognitionText}"
                FontSize="18"
                HorizontalOptions="Center" />

            <!-- Optional: Animated indicator for listening.
                 The ActivityIndicator's IsRunning and IsVisible are bound to IsListening -->
            <ActivityIndicator
                Color="Green"
                WidthRequest="50"
                HeightRequest="50"
                IsVisible="{Binding IsListening}"
                IsRunning="{Binding IsListening}"
                HorizontalOptions="Center" />

            <Button
                Text="{Binding IsListening, Converter={StaticResource ListenButtonTextConverter}}"
                Command="{Binding ToggleListenCommand}"
                WidthRequest="100"
                HeightRequest="100"
                CornerRadius="50"
                TextColor="White"
                FontAttributes="Bold"
                FontSize="16"
                HorizontalOptions="Center"
                VerticalOptions="Center">

                <Button.Triggers>
                    <DataTrigger TargetType="Button"
                                 Binding="{Binding IsListening}"
                                 Value="True">
                        <Setter Property="BackgroundColor" Value="#8a75f8" />
                    </DataTrigger>
                    <DataTrigger TargetType="Button"
                                 Binding="{Binding IsListening}"
                                 Value="False">
                        <Setter Property="BackgroundColor" Value="#5e42f6" />
                    </DataTrigger>
                </Button.Triggers>
            </Button>


        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
